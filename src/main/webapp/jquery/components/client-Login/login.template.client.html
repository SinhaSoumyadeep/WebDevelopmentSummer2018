<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Sign In</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link href="CSS/login.style.client.css" rel="stylesheet" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://apis.google.com/js/platform.js" async defer></script>
	<meta name="google-signin-client_id" content="82907325524-jfg57300vs7m0300cs7uk6pvekjckq39.apps.googleusercontent.com">
    <script src="JS/login.controller.client.js"></script>
    <script src="../../Services/user.service.client.js"></script>
    <script src="../../Models/user.model.client.js"></script>
    
</head>

<body>
<div id="info"></div>


<div id="centreAlign" >
    <img src="../Images/logo.png" alt="Mountain View" style="width:200px;height:60px;" align="middle">
    <h1 style="text-align: center;"> Login </h1>
    <div id="reg" >

        <table class="table" id="tble" >


            <tr >

                <td><input id="usernameFld" class="form-control"
                           placeholder="Username" /></td>
            </tr>
            <tr>
                <td><input type="password" id="passwordFld" class="form-control"
                           placeholder="Password" /></td>
            </tr>

            <tr >
                <td>
                    <div class="col-md-4 text-center">
                        <!--<button type="button" class="btn btn-success" id="search">Search</button>-->
                        <!--<button type="button" class="btn btn-success" id="loginBtn"  style="padding: 7.37px 149.75px;" >Sign In</button>-->
                        <div class="g-signin2" data-onsuccess="onSignIn"></div>
                        <script>
						    function onSignIn(googleUser) {
						    	  var profile = googleUser.getBasicProfile();
						    	  var id_token = googleUser.getAuthResponse().id_token;
						    	  console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
						    	  console.log('Name: ' + profile.getName());
						    	  console.log('Image URL: ' + profile.getImageUrl());
						    	  console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
						    	  this.validateUser(id_token)
						    	  
						    	}
						    
						    
						    function validateUser(id) {
						    	alert("hello from validate user"+id);

						        var valUserRes = $.ajax({
						            async: false,
						            type:"POST",
						            url: "http://localhost:8080/api/googleValidate",
						            data: {
						                'id': id
						            },

						        })

						        var valUserRes = valUserRes.responseText;
						        return valUserRes;

						    }
					    </script>

                    </div>

                </td>

            </tr>
            <tr>


                <td>
                    &nbsp;&nbsp;&nbsp;
                    <a href="/jquery/components/clientForgotPassword/forgot.template.client.html">forgot password?</a>
                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&nbsp;&nbsp;&nbsp;
                    <a href="/jquery/components/client-Register/register.template.client.html">sign up</a>
                </td>




            </tr>

        </table>
    </div>

</div>



</body>
</html>